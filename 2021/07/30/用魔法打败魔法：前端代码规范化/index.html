<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>ç”¨é­”æ³•æ‰“è´¥é­”æ³•ï¼šå‰ç«¯ä»£ç è§„èŒƒåŒ– | æ¸¸èµ°èµ°</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">ç”¨é­”æ³•æ‰“è´¥é­”æ³•ï¼šå‰ç«¯ä»£ç è§„èŒƒåŒ–</h1><a id="logo" href="/.">æ¸¸èµ°èµ°</a><p class="description">Stay hungry, stay foolish.</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">ç”¨é­”æ³•æ‰“è´¥é­”æ³•ï¼šå‰ç«¯ä»£ç è§„èŒƒåŒ–</h1><div class="post-meta">2021-07-30</div><div class="post-content"><h6 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h6><ol>
<li>å·¥å…·ç®€ä»‹</li>
<li>å®ç°æ€è·¯</li>
<li>å…·ä½“å®ç°</li>
<li>æ€»ç»“</li>
<li>é™„å½•</li>
</ol>
<blockquote>
<p>ä»£ç åƒä¸‡è¡Œï¼Œè§„èŒƒç¬¬ä¸€è¡Œã€‚<br>ç¼–ç ä¸è§„èŒƒï¼ŒåŒäº‹ä¸¤è¡Œæ³ªã€‚</p>
</blockquote>
<p>æ—©å‡ å¹´æ¥æ‰‹è¿‡ä¸€ä¸ªé¡¹ç›®ï¼Œä¸€å †bugä¸è¯´ï¼Œä»£ç è¿˜åˆè‡­åˆé•¿ï¼Œæ®è¯´ä¹‹å‰å†™ä»£ç çš„é‚£ä½ä»å…„ç»å¸¸æ”¹ä¸€ä¸ªbugåˆå¸¦å‡ºåä¸ªbugğŸŒé¡¹ç›®é‡Œå……æ–¥ç€å„ç§å«ä¹‰ä¸æ˜çš„å˜é‡ã€æ²¡æœ‰ç”¨åˆ°çš„ä¸çŸ¥é“ä»å“ªé‡Œå¤åˆ¶ç²˜è´´è¿‡æ¥çš„å‡½æ•°ã€ä¹±ä¸ƒå…«ç³Ÿçš„consoleã€éšå¿ƒæ‰€æ¬²çš„ç©ºè¡Œå’Œæ¯«æ— æ„ä¹‰çš„æ³¨é‡Šâ€¦â€¦</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/aefcee2c2846038e4601219ce28b3b90.png"></p>
<p>å¾ˆå¤šç¨‹åºå‘˜æ²¡æœ‰ä»£ç è§„èŒƒæ„è¯†ï¼Œç»å¸¸è§‰å¾—åªè¦åŠŸèƒ½èƒ½ç”¨å°±è¡Œäº†ï¼Œä»£ç è§„èŒƒæµªè´¹æ—¶é—´ï¼Œäºæ˜¯å†™å‡ºæ¥çš„ä»£ç è¿‡ä¸€æ®µæ—¶é—´å¯èƒ½è¿è‡ªå·±éƒ½çœ‹ä¸æ‡‚æ˜¯å¨ä»€ä¹ˆä¸œè¥¿ï¼Œæ›´ä¸ç”¨è¯´æ¥æ‰‹çš„åŒäº‹äº†ã€‚</p>
<p>ä»Šæ—¥ä¾¿æ¥è¯´è¯´ï¼Œå¦‚ä½•<strong>ä»æŠ€æœ¯å±‚é¢ï¼Œå®ç°ä»£ç è§„èŒƒä»¥åŠä»£ç æäº¤è§„èŒƒ</strong>ã€‚</p>
<h3 id="1ã€å·¥å…·ç®€ä»‹"><a href="#1ã€å·¥å…·ç®€ä»‹" class="headerlink" title="1ã€å·¥å…·ç®€ä»‹"></a>1ã€å·¥å…·ç®€ä»‹</h3><ol>
<li><em>husky</em>ï¼šä¸€ä¸ªGit hookså·¥å…·ï¼Œå¯ä»¥è®©æˆ‘ä»¬åœ¨gitæäº¤å‰åè¿›è¡Œä¸€äº›æ“ä½œï¼Œæ¯”å¦‚ï¼Œåœ¨æäº¤ä¹‹å‰æ£€æŸ¥ä»£ç æ˜¯å¦è§„èŒƒã€è¿›è¡Œç»Ÿä¸€çš„æ ¼å¼åŒ–å¤„ç†ã€æ£€æŸ¥gitæäº¤çš„ä¿¡æ¯æ ¼å¼ç­‰ç­‰ï¼›</li>
<li><em>eslint</em>ï¼šä¸€ä¸ªç”¨NodeJSå†™çš„Javascriptä»£ç æ£€æŸ¥å·¥å…·ï¼Œå¯è‡ªå®šä¹‰è§„åˆ™ï¼›</li>
<li><em>lint-staged</em>ï¼šä¸€ä¸ªèƒ½å¤Ÿåªå¯¹gitå˜æ›´æ–‡ä»¶è¿›è¡Œä»£ç æ£€æŸ¥çš„å·¥å…·ï¼›</li>
<li><em>commitizen</em>ï¼šä¸€ä¸ªæä¾›äº†äº¤äº’å¼å‘½ä»¤ï¼Œå¯ç”¨äºè§„èŒƒgit commitä¿¡æ¯çš„å·¥å…·ã€‚</li>
</ol>
<p>ä»¥ä¸Šå°±æ˜¯æˆ‘ä»¬è¿™æ¬¡è¦ç”¨åˆ°çš„å››ä¸ªå·¥å…·ã€‚</p>
<h3 id="2ã€å®ç°æ€è·¯"><a href="#2ã€å®ç°æ€è·¯" class="headerlink" title="2ã€å®ç°æ€è·¯"></a>2ã€å®ç°æ€è·¯</h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡huskyæä¾›çš„é’©å­(hooks)ï¼š</p>
<ul>
<li><p>åœ¨gitæäº¤å‰ï¼Œä½¿ç”¨eslintæˆ–è€…lint-stagedå¯¹ä»£ç è¿›è¡Œæ£€æŸ¥ï¼Œå¹¶è¿›è¡Œç»Ÿä¸€çš„æ ¼å¼åŒ–å¤„ç†ï¼›</p>
</li>
<li><p>åœ¨gitæäº¤æ—¶ï¼Œæ£€æŸ¥git commitçš„æ ¼å¼æ˜¯å¦ç¬¦åˆè§„å®šï¼›åŒæ—¶ï¼Œä½¿ç”¨commitizenå®ç°å‘½ä»¤è¡Œäº¤äº’ï¼Œæ¥è¾…åŠ©æˆ‘ä»¬ç”Ÿæˆåˆè§„çš„git commitã€‚</p>
</li>
</ul>
<h3 id="3ã€å…·ä½“å®ç°"><a href="#3ã€å…·ä½“å®ç°" class="headerlink" title="3ã€å…·ä½“å®ç°"></a>3ã€å…·ä½“å®ç°</h3><h4 id="3-1-husky"><a href="#3-1-husky" class="headerlink" title="3.1 husky"></a>3.1 husky</h4><p>å®‰è£…ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add husky -D</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/img_convert/0141382b4aef307550749f44f6f0512b.png" alt="package.json"></p>
<p>åœ¨<code>package.json</code>çš„<code>script</code>ä¸­æ·»åŠ ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="attr">&quot;prepare&quot;</span>: <span class="string">&quot;husky install&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>prepare</code>æ˜¯<code>npm</code>çš„ç”Ÿå‘½å‘¨æœŸè„šæœ¬ã€‚</p>
<p>å½“æ‰§è¡Œ<code>npm install</code>çš„æ—¶å€™ï¼Œå°±ä¼šè‡ªåŠ¨æ‰§è¡Œè„šæœ¬å†…å®¹<code>husky install</code>ï¼Œä»è€Œåœ¨å½“å‰é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ç”Ÿæˆ<code>.husky</code>æ–‡ä»¶å¤¹ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/3770e076ca60e61e9bd3e9259749fb82.png" alt=".husky"></p>
<p>è¿™é‡Œçš„<code>husky.sh</code>é…ç½®ä¸»è¦æ˜¯ä¸ºäº†è·å–hookçš„æ‰§è¡Œç»“æœï¼Œå½“æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºé”™æ—¶ï¼Œå°±é€€å‡ºè¿›ç¨‹ã€‚</p>
<p>æ¥ä¸‹æ¥å°±å¯ä»¥æ„‰å¿«åœ°ä½¿ç”¨<strong>git hooks</strong>å•¦ã€‚</p>
<h4 id="3-2-hookï¼špre-commit"><a href="#3-2-hookï¼špre-commit" class="headerlink" title="3.2 hookï¼špre-commit"></a>3.2 hookï¼špre-commit</h4><p>å‘½ä»¤è¡Œæ‰§è¡Œ<code>yarn husky add .husky/pre-commit</code>ç”Ÿæˆ<code>pre-commit</code>è„šæœ¬ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥æ‰‹åŠ¨ï¼‰ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">. <span class="string">&quot;<span class="subst">$(dirname <span class="string">&quot;<span class="variable">$0</span>&quot;</span>)</span>/_/husky.sh&quot;</span></span><br><span class="line"></span><br><span class="line">undefined</span><br></pre></td></tr></table></figure>

<p>ç¨ä½œä¿®æ”¹ï¼Œæ¥éªŒè¯ä¸‹åœ¨git commitçš„æ—¶å€™æ˜¯å¦æ‰§è¡Œäº†è¿™ä¸ªè„šæœ¬ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">. <span class="string">&quot;<span class="subst">$(dirname <span class="string">&quot;<span class="variable">$0</span>&quot;</span>)</span>/_/husky.sh&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;commitä¹‹å‰æ‰§è¡Œ&quot;</span></span><br></pre></td></tr></table></figure>
<p>å‘½ä»¤è¡Œgitæäº¤ä»£ç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -mâ€add husky configâ€</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/img_convert/82067250e964bd48c8d4da122e672d2b.png" alt="pre-commitæ‰§è¡Œç»“æœ"></p>
<p>å¯ä»¥çœ‹åˆ°pre-commitè„šæœ¬æ‰§è¡ŒæˆåŠŸï¼Œæ‰“å°å‡ºäº†è¯­å¥ã€‚</p>
<h4 id="3-3-åœ¨pre-commité‡Œæ·»åŠ eslintæ£€æŸ¥"><a href="#3-3-åœ¨pre-commité‡Œæ·»åŠ eslintæ£€æŸ¥" class="headerlink" title="3.3 åœ¨pre-commité‡Œæ·»åŠ eslintæ£€æŸ¥"></a>3.3 åœ¨pre-commité‡Œæ·»åŠ eslintæ£€æŸ¥</h4><p>å®‰è£…ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add eslint â€”dev</span><br></pre></td></tr></table></figure>
<p>å®‰è£…å®Œæˆåï¼Œæ‰§è¡Œ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn run eslint â€”init</span><br></pre></td></tr></table></figure>
<p>æˆ–</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./node_modules/.bin/eslint â€”init</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/img_convert/24b1203b8fc204e70003e92d00bf600d.png" alt="è¿™é‡Œæˆ‘é€‰æ‹©çš„æ˜¯airbnbçš„ä»£ç è§„èŒƒ"></p>
<p>æ‰§è¡Œå®Œæˆåä¼šè‡ªåŠ¨åœ¨æ ¹ç›®å½•ç”Ÿæˆ<code>eslint</code>é…ç½®æ–‡ä»¶<code>.eslinttrc.js</code>ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/6b7463722f379a00eb1381cb0bda6a7a.png"></p>
<p>ä¿®æ”¹<code>pre-commit</code>ï¼Œæ·»åŠ eslintæ ¼å¼æ£€æŸ¥ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">. <span class="string">&quot;<span class="subst">$(dirname <span class="string">&quot;<span class="variable">$0</span>&quot;</span>)</span>/_/husky.sh&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;eslintæ ¼å¼æ ¡éªŒ&quot;</span> &amp;&amp; ./node_modules/.bin/eslint src/*</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p><img src="https://img-blog.csdnimg.cn/img_convert/e33f24c008a5158458b2e7aa8e6dd0bd.png" alt="eslintæ£€æŸ¥ç»“æœ"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œeslintæ£€æµ‹å‡ºä»£ç é‡Œæœ‰2ä¸ª<code>error</code>å’Œ1ä¸ª<code>warning</code>ã€‚</p>
<p>erroræ˜¯å¿…é¡»ä¿®æ”¹çš„ï¼Œå¯ä»¥ä½¿ç”¨<code>eslint --fix</code>è‡ªåŠ¨ä¿®å¤ï¼Œå¹¶æ‰§è¡Œ<code>git add .</code>æŠŠfixåçš„å˜æ›´ä¹Ÿæ·»åŠ åˆ°gitç¼“å­˜åŒºï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">. <span class="string">&quot;<span class="subst">$(dirname <span class="string">&quot;<span class="variable">$0</span>&quot;</span>)</span>/_/husky.sh&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;eslintæ ¼å¼æ ¡éªŒ&quot;</span></span><br><span class="line"></span><br><span class="line">./node_modules/.bin/eslint src/* --fix <span class="comment"># å¯¹srcä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä½œeslintæ£€æŸ¥ï¼Œå¹¶ç”¨--fixä¿®å¤error</span></span><br><span class="line"></span><br><span class="line">git add . <span class="comment"># å°†eslintçš„fixå†…å®¹ä¹Ÿæ·»åŠ åˆ°gitæäº¤ä¸­</span></span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/e035e24964ab50cf3105b3996a13d9d9.png" alt="eslintä¿®å¤äº†errorå¹¶æäº¤æˆåŠŸ"></p>
<p>æˆåŠŸï¼</p>
<p>æç¤ºï¼šå¦‚æœä½¿ç”¨çš„æ˜¯Github Desktopè¿™ç±»çš„å›¾å½¢å·¥å…·ï¼Œæœ‰å¯èƒ½ä¼šå‡ºç°ä¸‹é¢è¿™ä¸ªé”™è¯¯â€”â€”</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/1741602b9bd809f60128741bc4682c0a.png"></p>
<p>è¿™æ˜¯å› ä¸ºæˆ‘ä»¬åªåœ¨é¡¹ç›®é‡Œå®‰è£…äº†eslintï¼Œå½“åœ¨è½¯ä»¶ä¸Šè¿è¡Œçš„æ—¶å€™å°±æœ‰å¯èƒ½å‡ºç°è·¯å¾„é”™è¯¯ï¼Œåªéœ€è¦å…¨å±€å®‰è£…ä¸€ä¸‹eslintå°±å¯ä»¥äº†ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add eslint -g</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„eslintæ£€æŸ¥è„šæœ¬ä¼šå¯¹<code>src</code>ä¸­çš„æ‰€æœ‰æ–‡ä»¶è¿›è¡Œæ£€æŸ¥ã€‚å¦‚æœæ˜¯ä¸€ä¸ªæ–°é¡¹ç›®è¿˜å¥½ï¼Œå¦‚æœæ˜¯ä¸€äº›è€é¡¹ç›®ï¼Œé‚£ä¹ˆæ¶‰åŠåˆ°çš„å˜æ›´æ–‡ä»¶å°±ä¼šå¾ˆå¤šã€‚</p>
<p>å¦‚æœä¸æƒ³æ¯æ¬¡éƒ½å…¨é‡æ£€æµ‹ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡<code>git diff</code>æ¥è·å–åˆ°å˜æ›´çš„æ–‡ä»¶ï¼š</p>
<p>ä¿®æ”¹pre-commitï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">. <span class="string">&quot;<span class="subst">$(dirname <span class="string">&quot;<span class="variable">$0</span>&quot;</span>)</span>/_/husky.sh&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;eslintæ ¼å¼æ ¡éªŒ&quot;</span></span><br><span class="line"></span><br><span class="line">arr=`git diff --name-only  HEAD` <span class="comment"># æŸ¥çœ‹å˜æ›´æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">for</span> filepath <span class="keyword">in</span> <span class="variable">$&#123;arr[@]&#125;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$filepath</span>&quot;</span> =~ ^[src/] ]]; <span class="keyword">then</span> : <span class="comment"># åªæ£€æµ‹srcä¸‹è¢«ä¿®æ”¹çš„æ–‡ä»¶çš„æ ¼å¼</span></span><br><span class="line">        <span class="keyword">if</span> [ -f <span class="string">&quot;<span class="variable">$filepath</span>&quot;</span> ];<span class="keyword">then</span> <span class="comment"># åªå¯¹å­˜åœ¨çš„æ–‡ä»¶è¿›è¡Œfixï¼Œè·³è¿‡deleteçš„æ–‡ä»¶</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="variable">$filepath</span></span><br><span class="line">            ./node_modules/.bin/eslint <span class="variable">$filepath</span> --fix</span><br><span class="line">            git add <span class="variable">$filepath</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç å®ç°äº†ï¼šåªå¯¹srcä¸­<em>æœ‰å˜æ›´ä¸”éåˆ é™¤çš„æ–‡ä»¶</em>è¿›è¡Œeslintæ£€æŸ¥å’Œfixã€‚</p>
<p>è¿™é‡Œæ¨èä¸€ä¸ªå·¥å…·ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢æåˆ°çš„<strong>lint-staged</strong>ï¼Œä¹Ÿèƒ½å®ç°åŒæ ·çš„åŠŸèƒ½ï¼Œä½¿ç”¨èµ·æ¥<strong>æ›´ç®€å•</strong>ã€‚</p>
<p>æ‰§è¡Œ<code>npx mrm@2 lint-staged</code>ï¼Œå¯ä»¥çœ‹åˆ°<code>package.json</code>ä¸­å¤šäº†å…³äº<code>lint-staged</code>çš„é…ç½®ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/b25e5806a802374f6d8f004ab2cd7f5f.png" alt="package.json"></p>
<p>ä¿®æ”¹ä¸€ä¸‹ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;lint-staged&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;src/*&quot;</span>: <span class="string">&quot;eslint --fix&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>pre-commitæ”¹ä¸ºï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">. <span class="string">&quot;<span class="subst">$(dirname <span class="string">&quot;<span class="variable">$0</span>&quot;</span>)</span>/_/husky.sh&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;eslintæ ¼å¼æ ¡éªŒ&quot;</span></span><br><span class="line"></span><br><span class="line">npx lint-staged</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/c748560141eeae41794ab7d5f1e1fb1f.png" alt="lint-stagedä»£ç æ£€æŸ¥"></p>
<p>æˆåŠŸï¼</p>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å®ç°äº†åŸºæœ¬çš„ä»£ç è§„èŒƒé…ç½®ã€‚</p>
<p>eslintçš„è¯¦ç»†é…ç½®å‚æ•°è¿™é‡Œå°±ä¸å±•å¼€äº†ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥å»å®˜ç½‘ä¸Šè‡ªè¡Œæ¢ç´¢ã€‚</p>
<h4 id="3-4-ç”¨commitizenè§„èŒƒgit-commit"><a href="#3-4-ç”¨commitizenè§„èŒƒgit-commit" class="headerlink" title="3.4 ç”¨commitizenè§„èŒƒgit commit"></a>3.4 ç”¨commitizenè§„èŒƒgit commit</h4><p>å®‰è£…ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev commitizen</span><br></pre></td></tr></table></figure>
<p>åœ¨package.jsonä¸­é…ç½®ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="attr">&quot;commit&quot;</span>: <span class="string">&quot;cz&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">&quot;config&quot;</span>: &#123;</span><br><span class="line">  <span class="attr">&quot;commitizen&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;path&quot;</span>: <span class="string">&quot;cz-conventional-changelog&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/6f65de55c1ba37a7b9212afbbfc5ebc4.png"></p>
<p>æ³¨æ„ï¼Œè¿™é‡Œå°±ä¸èƒ½ç”¨<code>git commit</code>äº†ï¼Œè€Œè¦ç”¨<strong>yarn run commit</strong>æˆ–<strong>npm run commit</strong>ï¼Œæ‰§è¡Œåå‘½ä»¤è¡Œé‡Œä¼šå‡ºç°ä¸€äº›äº¤äº’é€‰é¡¹ï¼Œæ¥å¸®åŠ©æˆ‘ä»¬ç”Ÿæˆgit commitã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/4c3b1390e5de47ebbc4f76fcf3dbaba4.png" alt="commitizenç”Ÿæˆçš„commit"></p>
<p>çœ‹ä¸ä¹ æƒ¯è‹±æ–‡çš„ä¹Ÿå¯ä»¥å®‰è£…ä¸­æ–‡åŒ…ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add cz-conventional-changelog-zh</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/img_convert/e1e7759cdebfd53378c359237498ce9e.png" alt="ä¸­æ–‡ç‰ˆæ•ˆæœ"></p>
<p><strong>commitizen</strong>åªèƒ½å¸®åŠ©æˆ‘ä»¬ç”Ÿæˆè§„èŒƒçš„git commitï¼Œå¦‚æœæœ‰äº›é˜Ÿå‹å¿˜äº†ä½¿ç”¨yarn run commitï¼Œè€Œç›´æ¥ç”¨git commit -mâ€xxxâ€å†™äº†ä¸è§„èŒƒçš„æäº¤ä¿¡æ¯ï¼Œæ€ä¹ˆåŠï¼Ÿ</p>
<p>è¿˜è®°å¾—ä¸Šé¢è¯´çš„<strong>husky</strong>å—ï¼Ÿæˆ‘ä»¬å¯ä»¥é€šè¿‡huskyçš„<strong>commit-msg</strong>é’©å­æ¥æ ¡éªŒgit commitçš„æäº¤ä¿¡æ¯ã€‚</p>
<h4 id="3-5-hookï¼šcommit-msg"><a href="#3-5-hookï¼šcommit-msg" class="headerlink" title="3.5 hookï¼šcommit-msg"></a>3.5 hookï¼šcommit-msg</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn husky add .husky/commit-msg</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹commit-msgï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">. <span class="string">&quot;<span class="subst">$(dirname <span class="string">&quot;<span class="variable">$0</span>&quot;</span>)</span>/_/husky.sh&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">commit_regex=<span class="string">&#x27;^Merge.+|(feat|fix|docs|style|refactor|perf|test|build|ci|chore|revert|types)(\(.+\))?: .&#123;1,50&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ! grep -iqE <span class="string">&quot;<span class="variable">$commit_regex</span>&quot;</span> <span class="string">&quot;<span class="variable">$1</span>&quot;</span>; <span class="keyword">then</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;commitä¿¡æ¯æ ¼å¼é”™è¯¯ï¼ï¼&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;æ ¼å¼åº”ä¸ºï¼š[Type]: [Summary]&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Typeå¯é€‰å€¼ä¸ºMerge|feat|fix|docs|style|refactor|perf|test|build|ci|chore|revert|types&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;æ³¨æ„ä¸­é—´çš„ç©ºæ ¼&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;ç¤ºä¾‹ï¼šgit commit -m \&quot;test: add something test\&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">exit</span> 1</span><br><span class="line"></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/ab028f537e47460293c87ba5c11f159f.png" alt="æ ¡éªŒgit commitçš„ä¿¡æ¯æ ¼å¼"></p>
<p><strong>å¤§åŠŸå‘Šæˆï¼</strong></p>
<h3 id="4ã€æ€»ç»“"><a href="#4ã€æ€»ç»“" class="headerlink" title="4ã€æ€»ç»“"></a>4ã€æ€»ç»“</h3><p>è§„èŒƒçš„ä»£ç ä¸ä»…èƒ½å‡å°‘åˆå¹¶å†²çªï¼Œè¿˜æœ‰åŠ©äºæé«˜ä»£ç çš„å¯è¯»æ€§ï¼Œé™ä½ä¹‹åçš„ç»´æŠ¤æˆæœ¬ã€‚</p>
<p>å¯¹å›¢é˜Ÿè€Œè¨€ï¼Œæœ‰å¯èƒ½æ˜¯é“æ‰“çš„ä»£ç æµæ°´çš„ç¨‹åºå‘˜ï¼Œå‰äººç•™ä¸‹çš„å‘å¾—åäººå»å¡«ï¼Œè§„èŒƒä»£ç æ˜¯éå¸¸å¿…è¦çš„ã€‚</p>
<p>å¯¹ä¸ªäººè€Œè¨€ï¼Œè§„èŒƒçš„ä»£ç ä¸ä»…èƒ½å‡å°‘bugçš„å‡ºç°ï¼Œè¿˜æœ‰åŠ©äºæ›´å¥½åœ°ç†è§£ç¼–ç¨‹è¯­è¨€çš„ç‰¹æ€§ï¼Œæˆé•¿æœ‰æ—¶å€™å°±æ˜¯è¿™äº›ç»†èŠ‚å¤„çš„ç§¯ç´¯ã€‚</p>
<p>æŠ€æœ¯ä¸Šåªèƒ½èµ·åˆ°ä¸€éƒ¨åˆ†çš„è§„èŒƒä½œç”¨ï¼Œæ›´é‡è¦çš„è¿˜æ˜¯æ„è¯†ä¸Šçš„ä¸»è§‚èƒ½åŠ¨æ€§ï¼Œåªæœ‰æ„è¯†åˆ°ä»£ç è§„èŒƒçš„é‡è¦æ€§ï¼Œæ‰èƒ½çœŸæ­£å®ç°é¡¹ç›®çš„ä»£ç è§„èŒƒåŒ–ã€‚</p>
<h5 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h5><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/typicode/husky">husky</a></li>
<li><a target="_blank" rel="noopener" href="https://eslint.org/">eslint</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/okonet/lint-staged">lint-staged</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/commitizen/cz-cli">commitizen</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/BingKui/javascript-zh">airbnbä»£ç è§„èŒƒ</a></li>
</ul>
</div><div class="tags"></div><div class="post-nav"><a class="pre" href="/2021/07/30/about/">about</a><a class="next" href="/2021/07/30/%E6%89%8B%E6%91%B8%E6%89%8B%E6%95%99%E4%BD%A0%E6%90%AD%E4%B8%AA%E8%84%9A%E6%89%8B%E6%9E%B6/">æ‰‹æ‘¸æ‰‹æ•™ä½ æ­ä¸ªè„šæ‰‹æ¶</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://example.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Node/">Node</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Node/JS/">JS</a></li></ul></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/NodeJS/" style="font-size: 15px;">NodeJS</a> <a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 15px;">çˆ¬è™«</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2021/07/30/about/">about</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/07/30/%E7%94%A8%E9%AD%94%E6%B3%95%E6%89%93%E8%B4%A5%E9%AD%94%E6%B3%95%EF%BC%9A%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83%E5%8C%96/">ç”¨é­”æ³•æ‰“è´¥é­”æ³•ï¼šå‰ç«¯ä»£ç è§„èŒƒåŒ–</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/07/30/%E6%89%8B%E6%91%B8%E6%89%8B%E6%95%99%E4%BD%A0%E6%90%AD%E4%B8%AA%E8%84%9A%E6%89%8B%E6%9E%B6/">æ‰‹æ‘¸æ‰‹æ•™ä½ æ­ä¸ªè„šæ‰‹æ¶</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/07/29/%E6%89%8B%E6%91%B8%E6%89%8B%E6%95%99%E4%BD%A0%E5%86%99%E4%B8%AAchrome%E6%8F%92%E4%BB%B6/">æ‰‹æ‘¸æ‰‹æ•™ä½ å†™ä¸ªchromeæ’ä»¶</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/07/28/hello-world/">åœ¨çº¿åšå®¢è½¬PDFç”µå­ä¹¦ | JSçˆ¬è™«åˆæ¢</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="https://blog.csdn.net/qq_24734285" title="CSDN" target="_blank">CSDN</a><ul></ul><a href="https://www.zhihu.com/people/xi-xi-84-58-42-22" title="çŸ¥ä¹" target="_blank">çŸ¥ä¹</a><ul></ul><a href="https://juejin.cn/user/3501284846746798" title="æ˜é‡‘" target="_blank">æ˜é‡‘</a><ul></ul><a href="https://www.cnblogs.com/youzz/" title="åšå®¢å›­" target="_blank">åšå®¢å›­</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright Â© 2021 <a href="/." rel="nofollow">æ¸¸èµ°èµ°.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>